## Render all Rmd files in this directory
for(file in files) {
renderFile(file)
}
library(rmarkdown)
library(knitr)
files <- dir(pattern = '[.]Rmd$', recursive = TRUE)
files = files[ files != "index.Rmd" ]
renderFile <- function(file) {
## Extract R code
purl(file)
## Make presentation
render(file, output_format = 'all')
}
## Render all Rmd files in this directory
for(file in files) {
renderFile(file)
}
library(rmarkdown)
library(knitr)
files <- dir(pattern = '[.]Rmd$', recursive = TRUE)
files = files[ files != "index.Rmd" ]
files[1]
?purl
library(rmarkdown)
library(knitr)
files <- dir(pattern = '[.]Rmd$', recursive = TRUE)
files = files[ files != "index.Rmd" ]
renderFile <- function(file) {
output = gsub(".Rmd", ".R", file)
## Extract R code
purl(file, output = output)
## Make presentation
render(file, output_format = 'all')
}
## Render all Rmd files in this directory
for(file in files) {
renderFile(file)
}
source('~/Dropbox/Classes/winterR_2016/render.R')
library(dplyr)
filter(df, c(1,3))
filter(df, 1
)
?filter
dplyr::filter(df, c(1, 3))
?filter_
filter_
?select
set.seed(2016) # reproducbility
df = data.frame(x = c(1, 2, 4, 8, 10),
x2 = rpois(5, 10),
y = rnorm(5),
z = rpois(5, 6)
)
df$x
df[, 1]
df[, "x"]
df[, c("x", "y")]
df
library(dplyr)
select(df, x)
select(df, "x", "x2")
select(df, x, x2)
select_(df, "x", "x2")
select(df, starts_with("x"))
?subset
df[ df$x > 2 & df$x < 5, c("y", "z")]
?filter
filter(df, x > 2 & x < 5)
?OR
?filter
select( filter(df, x > 2 & y < 0), y, z)
df %>% filter(x > 2 & y < 0) %>% select(y, z)
df$z3 = 5:1
df
?mutate
mutate(df, newcol = 5:1)
?transmute
?select
df = mutate(df, newcol = 5:1)
select(df, -newcol)
?matches
select(df, one_of("newcol"))
select(df, -one_of("newcol"))
select(df, -one_of("newcol", "y"))
rm(list=ls())
?arrange
arrange(df, x)
df
?order
df[ order(df$x), ]
source('~/.active-rstudio-document', echo=TRUE)
df[ order(df$x), ]
?transmute
df = mutate(df, newcol = x + 2)
df
mutate(df, newcol = 5:1)
df = mutate(df, newcol = x + 2)
mutate(mtcars, displ_l = disp / 61.0237)
transmute(mtcars, displ_l = disp / 61.0237)
library(rmarkdown)
library(knitr)
files <- dir(pattern = '[.]Rmd$', recursive = TRUE)
files = files[ files != "index.Rmd" ]
renderFile <- function(file) {
output = gsub(".Rmd", ".R", file)
## Extract R code
purl(file, output = output)
## Make presentation
render(file, output_format = 'all')
}
## Render all Rmd files in this directory
for (file in files) {
renderFile(file)
}
source('~/Dropbox/Classes/winterR_2016/render.R')
?render
source('~/Dropbox/Classes/winterR_2016/render.R')
library(stringr)
library(plyr)
fname <- "../../data/Bike_Lanes.csv"
bike = read.csv(fname, as.is=TRUE)
source('~/Dropbox/Classes/winterR_2016/render.R')
source('~/.active-rstudio-document', echo=TRUE)
mon = wide %>%
group_by(line, month, year) %>%
summarise(mean_avg = mean(Average))
mon = mutate(mon,
mid_month = dmy(paste0("15-", month, "-", year)))
head(mon)
ex_data = read.csv("http://www.aejaffe.com/winterR_2016/data/Charm_City_Circulator_Ridership.csv", as.is = TRUE)
head(ex_data, 2)
library(lubridate) # great for dates!
ex_data = mutate(ex_data, date = dmy(date))
ex_data[699,]
ex_data[ is.na(ex_data$date),]
head(ex_data[ is.na(ex_data$date),])
source('~/.active-rstudio-document', echo=TRUE)
head(ex_data)
head(ex_data[ is.na(ex_data$date),])
head(ex_data[ is.na(ex_data$date2),])
source('~/.active-rstudio-document', echo=TRUE)
head(wide)
head(ex_data)
head(ex_data[ is.na(ex_data$date), ])
source('~/.active-rstudio-document', echo=TRUE)
head(mon)
head(wide)
table(wide$year)
mon = wide %>%
group_by(line, month, year) %>%
summarise(mean_avg = mean(Average))
mon
table(mon$line)
table(wide$month)
table(wide$line)
table(wide$year)
table(wide$month)
mon = wide %>%
group_by(line, month, year)
on
mon
summarise(mon, mean_avg = mean(Average))
mon
summarise()
?summarise()
summarize
summarise
source('~/.active-rstudio-document', echo=TRUE)
?group_by
sessionInfo()
source('~/.active-rstudio-document', echo=TRUE)
source('~/Dropbox/Classes/winterR_2016/render.R')
source('~/.active-rstudio-document', echo=TRUE)
library(rmarkdown)
library(knitr)
files <- dir(pattern = '[.]Rmd$', recursive = TRUE)
files = files[ files != "index.Rmd" ]
files[1]
source('~/Dropbox/Classes/winterR_2016/render.R')
setwd("../../")
source('~/Dropbox/Classes/winterR_2016/render.R')
dplyr::rename
source('~/.active-rstudio-document', echo=TRUE)
file
library(rmarkdown)
library(knitr)
files <- dir(pattern = '[.]Rmd$', recursive = TRUE)
files = files[ files != "index.Rmd" ]
files
setwd("../../")
library(rmarkdown)
library(knitr)
files <- dir(pattern = '[.]Rmd$', recursive = TRUE)
files = files[ files != "index.Rmd" ]
files
rm(list = ls())
library(rmarkdown)
library(knitr)
files <- dir(pattern = '[.]Rmd$', recursive = TRUE)
files = files[ files != "index.Rmd" ]
files
file = files[10]
owd = getwd()
setwd(dirname(file))
file = basename(file)
output = gsub(".Rmd", ".R", file)
## Extract R code
purl(file, output = output)
## Make presentation
render(file, output_format = 'all')
setwd(owd)
source('~/Dropbox/Classes/winterR_2016/render.R')
warnings()
files
library(plyr)
source('~/Dropbox/Classes/winterR_2016/render.R')
setwd('../../')
source('~/Dropbox/Classes/winterR_2016/render.R')
setwd("../../")
source('~/Dropbox/Classes/winterR_2016/render.R')
TB <- read.xlsx(file="http://www.aejaffe.com/winterR_2016/data/indicator_estimatedincidencealltbper100000.xlsx",
sheetName = "Data")
library(xlsx,verbose=FALSE)
TB <- read.xlsx(file="http://www.aejaffe.com/winterR_2016/data/indicator_estimatedincidencealltbper100000.xlsx",
sheetName = "Data")
destfile = tempfile(fileext = ".xlsx") download.file("http://www.aejaffe.com/winterR_2016/data/indicator_estimatedincidencealltbper100000.xlsx", destfile = destfile)
TB <- read.xlsx(file = destfile,
sheetName = "Data")
head(TB, 1)
destfile = tempfile(fileext = ".xlsx") download.file("http://www.aejaffe.com/winterR_2016/data/indicator_estimatedincidencealltbper100000.xlsx", destfile = destfile)
destfile = tempfile(fileext = ".xlsx")
download.file("http://www.aejaffe.com/winterR_2016/data/indicator_estimatedincidencealltbper100000.xlsx", destfile = destfile)
TB <- read.xlsx(file = destfile,
sheetName = "Data")
setwd("../../")
source('~/Dropbox/Classes/winterR_2016/render.R')
qplot(x= weight, fill = Diet, data = ChickWeight, geom = c("histogram"))
source('~/.active-rstudio-document', echo=TRUE)
head(ChickWeight)
qplot(x = weight,
fill = factor(Diet),
data = ChickWeight,
geom = c("histogram"))
qplot(x = weight, fill = Diet, data = ChickWeight, geom = c("histogram"), alpha=I(.7))
qplot(x= weight, fill = Diet, data = ChickWeight, geom = c("density"), alpha=I(.7))
qplot(x= weight, colour = Diet, data = ChickWeight, geom = c("density"), alpha=I(.7))
qplot(x= weight,  colour = Diet, data = ChickWeight, geom = c("line"), stat="density")
?geom_line
qplot(x= weight,  colour = Diet, data = ChickWeight) + geom_line("density")
qplot(x= weight, colour = Diet, data = ChickWeight) + geom_line(stat = "density")
ggplot(x= weight, colour = Diet, data = ChickWeight) + geom_line(stat = "density")
ggplot(aes(x= weight, colour = Diet), data = ChickWeight) + geom_line(stat = "density")
ggplot(aes(x= weight, colour = Diet), data = ChickWeight) + geom_density(alpha=I(.7))
```
setwd("../../")
source('~/Dropbox/Classes/winterR_2016/render.R')
load("http://www.aejaffe.com/winterR_2016/data/charmcirc.rda")
destfile = tempfile(fileext = ".rda")
download.file("http://www.aejaffe.com/winterR_2016/data/charmcirc.rda", destfile = destfile)
load(destfile)
dat
destfile = tempfile(fileext = ".rda")
download.file("http://www.aejaffe.com/winterR_2016/data/charmcirc.rda", destfile = destfile)
x = load(destfile)
x
circ$day
circ2$day
library(RColorBrewer)
tmp=death[grep("s$", rownames(death)), 200:251]
yr = gsub("X","",names(tmp))
theSeq = seq(0,max(mat), by=50)
my.col <- colorRampPalette(brewer.pal(5,"Greens"))(length(theSeq))
levelplot(t(mat), aspect = "fill",at = theSeq,col.regions = my.col,xlab="Route",ylab="Date")
source('~/.active-rstudio-document', echo=TRUE)
mat
theSeq = seq(0,max(mat), by=50)
max(mat)
theSeq = seq(0,max(mat, na.rm = TRUE), by=50)
my.col <- colorRampPalette(brewer.pal(5,"Greens"))(length(theSeq))
levelplot(t(mat), aspect = "fill",at = theSeq,col.regions = my.col,xlab="Route",ylab="Date")
library(RColorBrewer)
tmp=death[grep("s$", rownames(death)), 200:251]
yr = gsub("X","",names(tmp))
theSeq = seq(0,max(tmp,na.rm=TRUE), by=0.05)
my.col <- colorRampPalette(brewer.pal(5,"Reds"))(length(theSeq))
levelplot(t(tmp), aspect = "fill",at = theSeq,col.regions = my.col,
scales=list(x=list(label=yr, rot=90, cex=0.7)))
```
setwd("../../")
?on.exit()
source('~/Dropbox/Classes/winterR_2016/render.R')
source('~/.active-rstudio-document', echo=TRUE)
set.seed(123)
http_data_dir = "http://www.aejaffe.com/winterR_2016/data"
Sal <- read.csv(paste0(http_data_dir, "Baltimore_City_Employee_Salaries_FY2014.csv"),as.is=TRUE)
mon <- read.csv(paste0(http_data_dir, "Monuments.csv"),
as.is=TRUE,na.strings="")
circ <- read.csv(paste0(http_data_dir, "charmcitycirc_reduced.csv"),
as.is=TRUE)
set.seed(123)
http_data_dir = "http://www.aejaffe.com/winterR_2016/data/"
Sal <- read.csv(paste0(http_data_dir, "Baltimore_City_Employee_Salaries_FY2014.csv"),as.is=TRUE)
mon <- read.csv(paste0(http_data_dir, "Monuments.csv"),
as.is=TRUE,na.strings="")
circ <- read.csv(paste0(http_data_dir, "charmcitycirc_reduced.csv"),
as.is=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
setwd("../../")
source('~/Dropbox/Classes/winterR_2016/render.R')
source('~/.active-rstudio-document', echo=TRUE)
setwd('../../')
source('~/Dropbox/Classes/winterR_2016/render.R')
warnings()
1/
0
complete.cases(NaN)
?margin.table
read.table
x = c(0, 1, 2, 3, NA, 3, 3, 2,2, 3)
x > 2
x != NA
(x == 1 | x == 2) & !is.na(x)
x %in% c(1, 2)
(x == 1 | x == 2)
(x == 1 | x == 2) & !is.na(x)
x %in% c(1, 2)
library(dplyr)
?rename()
rename_
dplyr:::rename_
getMethods("rename_")
findMethods("rename_")
?MethodsList
getMethod("rename_")
?revale
?revalue
x = rep(c("Male", "M", "m"), each = 20)
plyr::revalue(x, c("M" = "Male", "m" = "Male"))
?recode
library(car)
x = rep(c("Male", "M", "m"), each = 20)
car::recode(x, c("M" = "Male", "m" = "Male"))
library(car)
x = rep(c("Male", "M", "m"), each = 20)
car::recode(x, "c('m', 'M', 'male') = 'Male'")
recode
library(car)
x = rep(c("Male", "M", "m", "f", "Female", "female" ), each = 3)
car::recode(x, "c('m', 'M', 'male') = 'Male';
c('f', 'F', 'female') = 'Female';")
?recode
library(Hmisc)
?recode
Hmisc:::recode
Hmisc:::Recode
source('~/Dropbox/Classes/winterR_2016/render.R')
library(stringr)
?str_c
?str_extract()
shopping_list <- c("apples x4", "bag of flour", "bag of sugar", "milk x2")
str_extract(shopping_list, "\\d")
str_extract(shopping_list, "[a-z]+")
str_extract(shopping_list, "[a-z]{1,4}")
?str_match()
str_match()
pattern <- "a.b"
strings <- c("abb", "a.b")
str_detect(strings, pattern)
str_detect(strings, fixed(pattern))
?str_match
?coll
?modifiers
?str_match_all
strings <- c(" 219 733 8965", "329-293-8753 ", "banana", "595 794 7569",
"387 287 6718", "apple", "233.398.9187  ", "482 952 3315",
"239 923 8115 and 842 566 4692", "Work: 579-499-7527", "$1000",
"Home: 543.355.3679")
phone <- "([2-9][0-9]{2})[- .]([0-9]{3})[- .]([0-9]{4})"
str_extract(strings, phone)
str_match(strings, phone)
phone
str_match_all(strings, phone)
str_match(strings, phone)
?str_match(strings, phone)
str_subset
?str_subset
?str_detect
?str_subset
?str_sub
hw <- "Hadley Wickham"
str_sub(hw, 1, 6)
hw <- "Hadley Wickham"
str_sub(hw, 1, 2)
?str_replace
fruits <- c("one apple", "two pears", "three bananas")
str_replace(fruits, "[aeiou]", "-")
?str_subset
?modifiers
library(dplyr)
?first()
sapply(y, first) # on the fly
x <- c("I really", "like writing", "R code")
y <- strsplit(x, split =" ") # returns a list
y[[2]]
sapply(y, first) # on the fly
y
str_split()
?str_split
x
y <- str_split(x, " ") # returns a list
y
str_split("I.like.strings", ".")
str_split_fixed("I.like.strings", ".")
str_split_fixed("I.like.strings", ".", n = 100)
str_split("I.like.strings", fixed("."))
y[[2]]
sapply(y, dplyr::first) # on the fly
sapply(y, nth) # on the fly
sapply(y, nth, 2) # on the fly
sapply(y, last) # on the fly
x <- c("I really", "like writing", "R code programs")
y <- strsplit(x, split = " ") # returns a list
y
y2 <- str_split(x, " ") # returns a list
y2
str_split("I.like.strings", ".")
str_split("I.like.strings", fixed("."))
y[[2]]
sapply(y, dplyr::first) # on the fly
sapply(y, nth, 2) # on the fly
sapply(y, last) # on the fly
?first
library(plyr)
?first
source('~/.active-rstudio-document', echo=TRUE)
grep("Rawlings",Sal$Name)
which(str_detect(Sal$Name, "Rawlings"))
grep("Rawlings",Sal$Name)
which(grepl("Rawlings", Sal$Name))
which(str_detect(Sal$Name, "Rawlings"))
str_subset(Sal$Name, "Rawlings")
head(grep("Tajhgh",Sal$Name, value=TRUE))
grep("Jaffe",Sal$Name)
length(grep("Jaffe",Sal$Name))
Sal %>% select(Name) %>% str_subset("Rawlings")
Sal %>% select(Name)
class(Sal %>% select(Name))
?select
Sal %>% select(Name) %>% unlist %>% str_subset("Rawlings")
Sal %>% str_subset(Name, "Rawlings")
Sal %>% (str_subset(Name, "Rawlings"))
Sal %>% select(Name)
str_subset(Sal$Name, "Rawlings")
?set_colnames
str_detect(Sal$Name, "Rawlings")
head(str_detect(Sal$Name, "Rawlings"))
grep("Rawlings",Sal$Name,value=TRUE)
Sal[grep("Rawlings",Sal$Name),]
Sal %>% filter(str_subset(Name, "Rawlings"))
Sal %>% filter(str_detect(Name, "Rawlings"))
grep("^Payne.*", x = Sal$Name, value=TRUE)
head(grep("^Payne.*", x = Sal$Name, value=TRUE))
grep("Leonard.?S", x = Sal$Name, value=TRUE)
head(grep("Spence.*C.*", x = Sal$Name, value=TRUE))
?str_extract
shopping_list <- c("apples x4", "bag of flour", "bag of sugar", "milk x2")
str_extract(shopping_list, "\\d")
shopping_list <- c("apples x4", "bag of flour", "bag of sugar", "milk x2")
str_extract(shopping_list, "\\d")
str_extract(shopping_list, "[a-z]+")
head(str_extract("^Payne.*", x = Sal$Name, value=TRUE))
head(str_extract( Sal$Name, "^Payne.*"))
x = c("07620 Alpine, N.J.", "94027 Atherton, Calif.", "10014 New York, N.Y.", "91008 Duarte, Calif.")
zip = str_extract(x, "^[0-9]+")
zip
str_subset(x, "^[0-9]+")
grep("Rawlings",Sal$Name)
which(grepl("Rawlings", Sal$Name))
which(str_detect(Sal$Name, "Rawlings"))
head(grepl("Rawlings",Sal$Name))
head(str_detect(Sal$Name, "Rawlings"))
head(grep("^Payne.*", x = Sal$Name, value = TRUE))
head(grep("Leonard.?S", x = Sal$Name, value=TRUE))
head(grep("Spence.*C.*", x = Sal$Name, value=TRUE))
head(str_subset( Sal$Name, "^Payne.*"))
head(str_subset( Sal$Name, "Leonard.?S"))
head(str_subset( Sal$Name, "Spence.*C.*"))
head(Sal)
str_subset(Sal$AgencyID, "\\d")
str_extract(Sal$AgencyID, "\\d")
head(str_extract(Sal$AgencyID, "\\d"))
head(str_extract_all(Sal$AgencyID, "\\d"))
str_extract(Sal$AgencyID, "Rawlings")
ss = str_extract(Sal$Name, "Rawling")
head(ss)
ss[ !is.na(ss)]
dplyr_sal = Sal
dplyr_sal %>% mutate(dplyr_sal,
AnnualSalary = AnnualSalary %>%
str_replace(fixed("$"), ""))
str_replace(dplyr_sal$AnnualSalary, fixed("$"), "")
dplyr_sal = Sal
dplyr_sal %>% mutate( AnnualSalary = AnnualSalary %>%
str_replace(fixed("$"), ""))
dplyr_sal = Sal
dplyr_sal = dplyr_sal %>% mutate( AnnualSalary = AnnualSalary %>%
str_replace(fixed("$"), "") %>%
as.numeric)
head(dplyr_sal)
source('~/.active-rstudio-document', echo=TRUE)
